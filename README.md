# LZMA2 FPGA実装 (32KBバージョン)

## 概要
32KBの固定サイズ入力ブロックに最適化された、LZMA2圧縮アルゴリズムのFPGA実装です。並列処理、パイプラインアーキテクチャ、スマートメモリ管理を特徴とし、高いスループットを実現します。

## 特徴
- 32KB固定入力サイズ
- 8並列圧縮ユニット
- 8段パイプラインアーキテクチャ
- プリフェッチ機能付きスマートキャッシュ
- CRCによるデータ検証
- 性能モニタリング機能
- FPGA/ASIC双方に最適化

## ファイル構成
- `lzma2_pkg.sv` - メインパッケージ定義
- `lzma2_memory.sv` - メモリ管理システム
- `lzma2_compression_pkg.sv` - 圧縮エンジンパッケージ
- `lzma2_match_finder.sv` - マッチファインダー実装
- `lzma2_range_encoder.sv` - レンジエンコーダ実装
- `lzma2_compression_engine.sv` - メイン圧縮エンジン
- `lzma2_crc.sv` - CRC生成/検証
- `lzma2_top.sv` - トップレベルモジュール

## 性能仕様
- クロック周波数
  - FPGA: 最大300MHz
  - ASIC(28nm): 最大1GHz
- スループット
  - FPGA: 4.5-6 GB/秒
  - ASIC: 20-25 GB/秒
- レイテンシ: 25-30クロックサイクル
- 圧縮率: 通常1.5-2.5倍（データ依存）

## リソース要件
### FPGA実装
- 論理要素: 約80-100K LUT
- メモリ: 約250KB
- 中～大規模FPGAに適合

### ASIC実装 (28nmプロセス)
- コア面積: 約2-3mm²
- メモリ面積: 約1.5-2mm²
- 総消費電力: 500-700mW @ 1GHz

## インターフェース
```systemverilog
module lzma2_top (
    input  logic                clk,
    input  logic                rst_n,
    input  logic [255:0]        data_in,
    input  logic                data_valid,
    output logic                ready,
    output logic [255:0]        data_out,
    output logic                data_valid_out,
    input  logic                output_ready,
    input  logic                start,
    output logic                busy,
    output logic [31:0]         status
);
```

## 使用方法
1. `rst_n`を用いてシステムを初期化
2. `ready`信号を待機
3. 32KBのデータを256ビット単位で`data_in`に入力
4. `status`レジスタで圧縮進捗を監視
5. 圧縮データを`data_out`から受信

## 実装上の特徴
- 32KB固定サイズ入力に最適化
- 8つの圧縮ユニットによる並列処理
- スマートキャッシュによるメモリアクセス最適化
- 総合的な性能モニタリング機能
- CRCによるデータ整合性検証

## 設計上の考慮点
- スマートキャッシュによるメモリバンド幅の最適化
- パイプラインハザード管理
- 効率的な確率モデル更新
- クロックゲーティングによる電力最適化

## 検証機能
- CRCによるデータ検証
- パフォーマンスカウンタ
- デバッグ用アサーション
- パイプライン使用率モニタリング

## 最適化オプション
- パイプラインステージ数の調整
- キャッシュパラメータの最適化
- 並列ユニット数の調整
- メモリアクセスパターンの調整

## カスタマイズ
以下のパラメータを調整可能：
- パイプラインステージ数
- 並列処理ユニット数
- キャッシュサイズ/構成
- プリフェッチ深度
- CRC生成多項式

## 注意事項
- 入力データサイズは32KB固定
- メモリバンド幅がボトルネックとなる可能性
- 消費電力は使用パターンに依存
- FPGAの種類によって最適なパラメータ設定が異なる

## ライセンス
MIT License - 詳細はLICENSEファイルを参照

## 作者
[所属/組織名]